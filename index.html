<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FourTwenty Analytics â€” Portfolio Hub</title>
  <meta name="description" content="FourTwenty Analytics portfolio hub. Left panel renders README.md from the repo root." />
  <meta name="color-scheme" content="light dark" />

  <!-- Favicon (optional) -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸŒ¿</text></svg>">

  <!-- GitHub Markdown styles (for nicer README rendering) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.5.1/github-markdown.min.css" integrity="sha512-5gCgV7rLyGuB1QKco67qXlUc9cWn2s/IOp3rCUTZHd5AxW1HjWj0o4s8g4CzQ5o2p8m0vgr2Q2kq9Tn0j0Qomw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- highlight.js (syntax highlighting for code blocks) -->
  <link rel="stylesheet" href="https://unpkg.com/highlight.js/styles/github.min.css">

  <style>
    :root {
      --bg: #0b0c0f;
      --card: #12141a;
      --muted: #98a2b3;
      --text: #e5e7eb;
      --border: #1f2230;
      --accent: #22c55e;
    }
    html, body { height: 100%; }
    body { margin: 0; font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji"; color: var(--text); background: linear-gradient(180deg, #0b0c0f, #0e1116); }
    a { color: #93c5fd; }

    /* Layout */
    .wrap { display: grid; grid-template-rows: auto 1fr; height: 100vh; }
    header { border-bottom: 1px solid var(--border); backdrop-filter: saturate(120%) blur(4px); background: rgba(13, 16, 22, 0.7); }
    .bar { display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 14px 18px; }
    .brand { display: flex; align-items: center; gap: 10px; font-weight: 600; letter-spacing: .2px; }
    .brand .dot { font-size: 18px; }
    .brand .name { font-size: 15px; opacity: .9; }

    main { display: grid; grid-template-columns: 1fr 320px; gap: 16px; padding: 16px; }
    @media (max-width: 960px) { main { grid-template-columns: 1fr; } }

    .panel { border: 1px solid var(--border); background: linear-gradient(180deg, #10131a, #0f1218); border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
    .panel .head { display:flex; align-items:center; justify-content:space-between; padding: 10px 14px; border-bottom: 1px solid var(--border); background: rgba(15, 18, 25, .6); }
    .panel .head h3 { margin: 0; font-size: 13px; letter-spacing: .4px; text-transform: uppercase; color: var(--muted); }
    .panel .body { padding: 0; }

    /* README panel specifics */
    #readme-panel { padding: 18px; max-height: calc(100vh - 140px); overflow: auto; }
    .markdown-body { color: var(--text); background: transparent; }
    .markdown-body h1, .markdown-body h2, .markdown-body h3, .markdown-body h4 { border-bottom: none; }

    /* Right panel content placeholder (keep your existing content here) */
    #right-panel { padding: 12px; }

    footer { border-top: 1px solid var(--border); padding: 10px 16px; font-size: 12px; color: var(--muted); }
    /* Right-panel styles */
    .card { padding: 14px; }
    .card h3 { margin: 6px 0 12px; font-size: 14px; letter-spacing: .3px; text-transform: uppercase; color: var(--muted); }
    .orbit { border-top: 1px solid var(--border); padding-top: 10px; margin-top: 10px; }
    .orbit:first-of-type { border-top: none; padding-top: 0; margin-top: 0; }
    .orbit-title { margin: 0 0 6px; font-size: 13px; color: var(--text); opacity: .9; }
    .orbit ul { list-style: none; padding-left: 0; margin: 0; }
    .orbit li { margin: 6px 0; }
    .orbit a { text-decoration: none; }
    .orbit a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Top Bar (keep your existing content; tweak as needed) -->
    <header>
      <div class="bar">
        <div class="brand">
          <div class="dot">ğŸŒ¿</div>
          <div class="name">FourTwenty Analytics â€” Portfolio Hub</div>
        </div>
        <nav style="display:flex; gap:10px; font-size:13px;">
          <a href="https://github.com/zbreeden/FourTwentyAnalytics" target="_blank" rel="noopener">GitHub</a>
          <a href="https://zbreeden.github.io/FourTwentyAnalytics/" aria-current="page">Home</a>
        </nav>
      </div>
    </header>

    <main>
      <!-- LEFT: README renderer -->
      <section class="panel">
        <div class="head">
          <h3>README.md (repo root)</h3>
        </div>
        <div class="body">
          <article id="readme-panel" class="markdown-body"></article>
        </div>
      </section>

      <!-- RIGHT: keep your existing right-panel content (cards, links, etc.) -->
      <aside class="panel">
        <div class="head">
          <h3>Side Panel</h3>
        </div>
        <div class="body" id="right-panel">
          <div class="card" id="Key Repos">
  <h3>The Constellation</h3>

  <!-- Core Systems -->
  <div class="orbit">
    <h4 class="orbit-title">Core Systems</h4>
    <ul>
      <li>ğŸš€ <a href="https://zbreeden.github.io/launch-model/"
             onclick="signalNavClick('launch_repo_link','Launch Model Repo','homepage')">Launch Model</a></li>
      <li>ğŸ«€ <a href="https://zbreeden.github.io/archive-model/"
             onclick="signalNavClick('archive_repo_link','Archive Model Repo','homepage')">Archive Model</a></li>
      <li>ğŸ“¡ <a href="https://zbreeden.github.io/signal-model/"
             onclick="signalNavClick('signal_repo_link','Signal Model Repo','homepage')">Signal Model</a></li>
      <li>ğŸ›¡ï¸ <a href="https://zbreeden.github.io/protector-model/"
              onclick="signalNavClick('protector_repo_link','Protector Model Repo','homepage')">Protector Model</a></li>
    </ul>
  </div>
        
  <!-- Delivery & Insight -->
  <div class="orbit">
    <h4 class="orbit-title">Delivery &amp; Insight</h4>
    <ul>
      <li>ğŸ¦ <a href="https://zbreeden.github.io/bank-model/"
             onclick="signalNavClick('bank_repo_link','Bank Model Repo','homepage')">Bank Model</a></li>
      <li>ğŸ§  <a href="https://zbreeden.github.io/evaluator-model/"
             onclick="signalNavClick('evaluator_repo_link','Evaluator Model Repo','homepage')">Evaluator Model</a></li>
      <li>ğŸ“– <a href="https://zbreeden.github.io/story-model/"
             onclick="signalNavClick('story_repo_link','Story Model Repo','homepage')">Story Model</a></li>
    </ul>
  </div>

  <!-- Growth & Experiments -->
  <div class="orbit">
    <h4 class="orbit-title">Growth &amp; Experiments</h4>
    <ul>
      <li>ğŸŒ± <a href="https://zbreeden.github.io/grower-model/"
             onclick="signalNavClick('grower_repo_link','Grower Model Repo','homepage')">Grower Model</a></li>
      <li>âš¡ <a href="https://zbreeden.github.io/catalyst-model/"
             onclick="signalNavClick('catalyst_repo_link','Catalyst Model Repo','homepage')">Catalyst Model</a></li>
      <li>ğŸ® <a href="https://zbreeden.github.io/player-model/"
             onclick="signalNavClick('player_repo_link','Player Model Repo','homepage')">Player Model</a></li>
      <li>ğŸ² <a href="https://zbreeden.github.io/gambler-model/"
             onclick="signalNavClick('gambler_repo_link','Gambler Model Repo','homepage')">Gambler Model</a></li>
      <li>ğŸ§­ <a href="https://zbreeden.github.io/trainer-model/"
             onclick="signalNavClick('trainer_repo_link','Trainer Model Repo','homepage')">Trainer Model</a></li> 
      <li>ğŸ’ª <a href="https://zbreeden.github.io/coach-model/"
             onclick="signalNavClick('coach_repo_link','Coach Model Repo','homepage')">Coach Model</a></li>     </ul>
  </div>

  <!-- Orbit & Ops -->
  <div class="orbit">
    <h4 class="orbit-title">Orbit &amp; Ops</h4>
    <ul>
      <li>ğŸ›°ï¸  <a href="https://zbreeden.github.io/orbiter-model/"
             onclick="signalNavClick('orbiter_repo_link','Orbiter Model Repo','homepage')">Orbiter Model</a></li>
      <li>âš“ <a href="https://zbreeden.github.io/anchor-model/"
             onclick="signalNavClick('anchor_repo_link','Anchor Model Repo','homepage')">Anchor Model</a></li>
      <li>ğŸ¢ <a href="https://zbreeden.github.io/firm-model/"
             onclick="signalNavClick('firm_repo_link','Firm Model Repo','homepage')">Firm Model</a></li>
      <li>ğŸª <a href="https://zbreeden.github.io/mirror-model/"
             onclick="signalNavClick('mirror_repo_link','Mirror Model Repo','homepage')">Mirror Model</a></li>
    </ul>
  </div>
</div>
        </div>
      </aside>
    </main>

    <footer>
      <div>Â© FourTwenty Analytics â€” README panel auto-renders from <code>main/README.md</code>.</div>
    </footer>
  </div>

  <!-- Marked (Markdown â†’ HTML) -->
  <script src="https://unpkg.com/marked/marked.min.js"></script>
  <!-- highlight.js (syntax highlighting) -->
  <script src="https://unpkg.com/highlight.js/lib/common.min.js"></script>

  <script>
(function () {
  // Configure your repo here
  const GITHUB_USER = "zbreeden";
  const REPO        = "FourTwentyAnalytics";
  const BRANCH      = "main"; // change if your default branch differs
  const README_PATH = "README.md"; // adjust if your README lives elsewhere

  // Bases
  const RAW_BASE       = `https://raw.githubusercontent.com/${GITHUB_USER}/${REPO}/${BRANCH}/`;
  const REPO_BLOB_BASE = `https://github.com/${GITHUB_USER}/${REPO}/blob/${BRANCH}/`;

  // File URLs
  const RAW_README = `${RAW_BASE}${README_PATH}`;

  const panel = document.getElementById("readme-panel");
  if (!panel) return;

  fetch(RAW_README, { cache: "no-store", mode: "cors" })
    .then(r => { if (!r.ok) throw new Error(`Fetch failed (${r.status})`); return r.text(); })
    .then(md => {
      // Render Markdown (fallback to plain text if marked isn't present)
      const html = (window.marked)
        ? marked.parse(md, { mangle: false, headerIds: true })
        : `<pre>${md.replace(/[&<>]/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;'}[s]))}</pre>`;
      panel.innerHTML = html;

      // Rewrite relative images to RAW URLs
      panel.querySelectorAll("img[src]").forEach(img => {
        const src = img.getAttribute("src") || "";
        if (src && !/^(https?:)?\/\//i.test(src) && !src.startsWith("data:")) {
          img.src = new URL(src, RAW_BASE).href;
        }
      });

      // Rewrite relative links to repository blob URLs
      panel.querySelectorAll("a[href]").forEach(a => {
        const href = a.getAttribute("href") || "";
        if (!href) return;
        if (href.startsWith("#")) return;                          // keep anchors
        if (/^(https?:)?\/\//i.test(href) || href.startsWith("mailto:")) return; // keep absolutes
        a.href = new URL(href, REPO_BLOB_BASE).href;
        a.target = "_blank";
        a.rel = "noopener";
      });

      // Syntax highlighting (if hljs is present)
      if (window.hljs) {
        panel.querySelectorAll("pre code").forEach(block => {
          try { hljs.highlightElement(block); } catch (e) {}
        });
      }
    })
    .catch(err => {
      panel.innerHTML = `
        <div style="padding:12px; border:1px solid var(--border); border-radius:10px;">
          <strong>Couldnâ€™t load README.md</strong><br/>
          <code>${err.message}</code><br/>
          <a href="${REPO_BLOB_BASE}${README_PATH}" target="_blank" rel="noopener">Open README on GitHub</a>
        </div>`;
    });
})();
</script>


  <!-- Optional: Google Tag Manager (replace with your container ID) -->
  <!--
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
    var f=d.getElementsByTagName(s)[0], j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:'';
    j.async=true; j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl; f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-XXXXXXX');
  </script>
  -->
  <script>
    // minimal analytics helper to avoid errors if onclick is present
    function signalNavClick(id,label,context){
      try {
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({event:'nav_click', id, label, context});
      } catch(e) { /* noop */ }
    }
  </script>
</body>
</html>
